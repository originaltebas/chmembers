<div class="container-fluid">
    {% set nombre = 'Agregar o Quitar Integrantes de las Familias' %}
    {% set nombres = 'Familias' %}
    <!-- Page Heading -->
    <h1 class="h3 mb-2 alert alert-info"> {{modo}} {{nombre}} </h1>
        {% with messages = get_flashed_messages(with_categories=true) %}
        <!-- Categories: success (green), info (blue), warning (yellow), danger (red) -->
        {% if messages %}
          {% for category, message in messages %}
            <div class="alert alert-{{ category }} alert-dismissible" role="alert">
            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <!-- <strong>Title</strong> --> {{ message }}
            </div>
          {% endfor %}
        {% endif %}
      {% endwith %}    <!-- DataTales Example -->
<!-- Basic Card Example -->
<div class="card shadow mb-4">
  <div class="card-header py-3">
      <h6 class="m-0 font-weight-bold text-primary">
          Datos de la Familia
      </h6>
  </div>
  <div class="card-body">
    {% if f %}
    <div id="tbDatosFamilia" class="table-responsive mt-2">
      <table class="table table-bordered table-striped" width="100%" cellspacing="0">
          <thead class="thead-dark">
              <tr class="text-center">
                  <th scope="col">Id</th>
                  <th scope="col">Nombre</th>
                  <th scope="col">Descripci&oacute;n</th>
                  <th scope="col">Direcci&oacute;n</th>
                  <th scope="col"># de Personas</th>
              </tr>
          </thead>
        <tbody>
          <tr  class="table-primary">
            <td scope="row" class="text-center dir-id"> {{ f.id }} </td>
            <td class="text-center">
              {{ f.nombre_grupo }}
            </td>
            <td class="text-center">
              {{ f.descripcion_grupo }}
            </td>
            <td class="text-center">
                {{ f.direccion.tipo_via }} {{ f.direccion.nombre_via }}, {{ f.direccion.nro_via }}.
                {% if f.direccion.portalescalotros_via %}
                    {{f.direccion.portalescalotros_via }}.
                {% endif %}
                {{ f.direccion.cp_via }}. {{ f.direccion.ciudad_via }}. {{ f.direccion.provincia_via }}. {{ f.direccion.pais_via }}.
            </td>
            <td class="text-center count-gc">
              {% if f.miembros %}
              {{ f.miembros|count() }}
              {% else %}
              0
              {% endif %}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    {% endif %}


{# listar miembros INCLUIDOS#}
<h3 class="mt-5 mb-2 text-center">
  Tabla de Miembros actualmente incluidos
</h3>
<div class="table-responsive mt-2">
  <table class="table table-bordered table-striped m-incluidos" width="100%" cellspacing="0">
    <thead class="thead-dark">
      <tr class="text-center">
        <th scope="col">Id</th>
        <th scope="col" colspan=9>Nombres y Apellidos</th>
        <th scope="col">Acci&oacute;n</th>
      </tr>
    </thead>
    <tbody>
        {% if miembros_in and miembros_in.count()>0 %}
        {% for miembro in miembros_in %}
      <tr  class="table-success">
        <td scope="row" class="text-center dir-id"> {{ miembro.id }} </td>
        <td class="text-center" colspan=9>
          {{ miembro.nombres }} {{ miembro.apellidos }}
        </td>
        <td class="text-center count-in">
          {% if miembro.id_familia != 0 %}
          1
          {% else %}
          0
          {% endif %}
        </td>

        <td class="text-center">
            <button class="agregar-quitar-miembros" tag-accion="quitar" tag-id="{{ miembro.id }}">Quitar
            </button>
          </td>
      </tr>
      {% endfor %}
      <tr class="tag-coletilla-ma d-none"><td colspan="12" class="text-center" >No Hay Miembros Asignados</td></tr>
      {% else %}
      <tr class="tag-coletilla-ma"><td colspan="12" class="text-center" >No Hay Miembros Asignados</td></tr>
      {% endif %}
      </tbody>
  </table>
</div>



{# listar miembros #}
<h3 class="mt-5 mb-2 text-center">
  Tabla de Miembros No incluidos
</h3>
<div class="table-responsive mt-2">
  <table class="table table-bordered table-striped m-no-incluidos" width="100%" cellspacing="0">
    <thead class="thead-dark">
      <tr class="text-center">
        <th scope="col">Id</th>
        <th scope="col" colspan=9>Nombres y Apellidos</th>
        <th scope="col"># Grupos Caseros</th>
        <th scope="col">Acci&oacute;n</th>
      </tr>
    </thead>
    <tbody>
     {% if miembros_all and miembros_all.count()>0 %}
      {% for miembro in miembros_all %}
      <tr  class="table-danger">
        <td scope="row" class="text-center dir-id"> {{ miembro.id }} </td>
        <td class="text-center" colspan=9>
          {{ miembro.nombres }} {{ miembro.apellidos }}
        </td>
        <td class="text-center count-in">
            {% if miembro.id_familia != 0 %}
            1
            {% else %}
            0
            {% endif %}
          </td>
        <td class="text-center">
            <button class="agregar-quitar-miembros" tag-accion="agregar" tag-id="{{ miembro.id }}">Agregar
            </button>
          </td>
      </tr>
      {% endfor %}
      <tr class="tag-coletilla-mni d-none"><td colspan="12" class="text-center">Todos los miembros de la BD están asignados</td></tr>
      {% else %}
      <tr class="tag-coletilla-mni"><td colspan="12" class="text-center">Todos los miembros de la BD están asignados</td></tr>
      {% endif %}
    </tbody>
  </table>
</div>

<form class="user" method="POST" role="form" action="">
    {{ ids_miembros.csrf_token }}
    {{ ids_miembros.modifFlag(value='False') }}
    {{ ids_miembros.ids }}
    {{ ids_miembros.ids_totales }}
    <div class="row">
        <div class="col-4"></div>
        <div class="col-4">
          <input type="submit" id="submit" name="submit" class="btn btn-lg btn-primary btn-user btn-block" value="Guardar" />
        </div>
        <div class="col-4"></div>
      </div>
</form>

</div>
</div>

</div>